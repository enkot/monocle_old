<template>
  <div>
    <div class="shadow-wrap">
      <Toast v-model="copied" />
      <div class="check clip-svg">
        <div class="flex items-center h-1/3 px-4 bg-white">
          <div
            class="flex-start px-1 rounded text-xs font-semibold text-white bg-green-500"
          >
            {{ account.currency.code }}
          </div>
          <span class="ml-3 text-sm font-semibold text-gray-800">{{
            user.name
          }}</span>
        </div>
        <div class="flex flex-col justify-between">
          <div class="flex flex-col px-4 py-3">
            <span
              class="text-sm text-gray-600 uppercase font-semibold tracking-widest"
            >
              Баланс
            </span>
            <span class="text-xl font-bold text-black">
              {{ account.currency.symbol }} {{ account.balance.toFixed(2) }}
            </span>
          </div>
          <div
            class="px-4 pb-4 text-sm text-gray-600 truncate cursor-pointer hover:text-gray-800"
            @click="copyIBAN(account.iban)"
          >
            {{ account.iban }}
          </div>
        </div>
      </div>
    </div>
    <svg
      class="absolute"
      width="280"
      height="160"
      viewBox="0 0 280 160"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <clipPath id="myClip">
          <path
            d="M280 0H0V44C0 45.1046 0.913673 45.9712 1.97359 46.2821C4.87864 47.1341 7 49.8193 7 53C7 56.1807 4.87864 58.8659 1.97359 59.7179C0.913673 60.0288 0 60.8954 0 62V155C0 155.552 0.454668 155.987 0.989881 156.123C1.744 156.315 2.41254 156.722 2.92686 157.274C4.05646 158.486 5.34315 160 7 160C8.65685 160 9.94354 158.486 11.0731 157.274C11.8034 156.49 12.8445 156 14 156C15.1555 156 16.1966 156.49 16.9269 157.274C18.0565 158.486 19.3431 160 21 160C22.6569 160 23.9435 158.486 25.0731 157.274C25.8034 156.49 26.8445 156 28 156C29.1555 156 30.1966 156.49 30.9269 157.274C32.0565 158.486 33.3431 160 35 160C36.6569 160 37.9435 158.486 39.0731 157.274C39.8034 156.49 40.8445 156 42 156C43.1555 156 44.1966 156.49 44.9269 157.274C46.0565 158.486 47.3431 160 49 160C50.6569 160 51.9435 158.486 53.0731 157.274C53.8034 156.49 54.8445 156 56 156C57.1555 156 58.1966 156.49 58.9269 157.274C60.0565 158.486 61.3431 160 63 160C64.6569 160 65.9435 158.486 67.0731 157.274C67.8034 156.49 68.8445 156 70 156C71.1555 156 72.1966 156.49 72.9269 157.274C74.0565 158.486 75.3431 160 77 160C78.6569 160 79.9435 158.486 81.0731 157.274C81.8034 156.49 82.8445 156 84 156C85.1555 156 86.1966 156.49 86.9269 157.274C88.0565 158.486 89.3431 160 91 160C92.6569 160 93.9435 158.486 95.0731 157.274C95.8034 156.49 96.8445 156 98 156C99.1555 156 100.197 156.49 100.927 157.274C102.056 158.486 103.343 160 105 160C106.657 160 107.944 158.486 109.073 157.274C109.803 156.49 110.844 156 112 156C113.156 156 114.197 156.49 114.927 157.274C116.056 158.486 117.343 160 119 160C120.657 160 121.944 158.486 123.073 157.274C123.803 156.49 124.844 156 126 156C127.156 156 128.197 156.49 128.927 157.274C130.056 158.486 131.343 160 133 160C134.657 160 135.944 158.486 137.073 157.274C137.803 156.49 138.844 156 140 156C141.156 156 142.197 156.49 142.927 157.274C144.056 158.486 145.343 160 147 160C148.657 160 149.944 158.486 151.073 157.274C151.803 156.49 152.844 156 154 156C155.156 156 156.197 156.49 156.927 157.274C158.056 158.486 159.343 160 161 160C162.657 160 163.944 158.486 165.073 157.274C165.803 156.49 166.844 156 168 156C169.156 156 170.197 156.49 170.927 157.274C172.056 158.486 173.343 160 175 160C176.657 160 177.944 158.486 179.073 157.274C179.803 156.49 180.844 156 182 156C183.156 156 184.197 156.49 184.927 157.274C186.056 158.486 187.343 160 189 160C190.657 160 191.944 158.486 193.073 157.274C193.803 156.49 194.844 156 196 156C197.156 156 198.197 156.49 198.927 157.274C200.056 158.486 201.343 160 203 160C204.657 160 205.944 158.486 207.073 157.274C207.803 156.49 208.844 156 210 156C211.156 156 212.197 156.49 212.927 157.274C214.056 158.486 215.343 160 217 160C218.657 160 219.944 158.486 221.073 157.274C221.803 156.49 222.844 156 224 156C225.156 156 226.197 156.49 226.927 157.274C228.056 158.486 229.343 160 231 160C232.657 160 233.944 158.486 235.073 157.274C235.803 156.49 236.844 156 238 156C239.156 156 240.197 156.49 240.927 157.274C242.056 158.486 243.343 160 245 160C246.657 160 247.944 158.486 249.073 157.274C249.803 156.49 250.844 156 252 156C253.156 156 254.197 156.49 254.927 157.274C256.056 158.486 257.343 160 259 160C260.657 160 261.944 158.486 263.073 157.274C263.803 156.49 264.844 156 266 156C267.156 156 268.197 156.49 268.927 157.274C270.056 158.486 271.343 160 273 160C274.657 160 275.944 158.486 277.073 157.274C277.803 156.49 278.844 156 280 156V62C280 60.8954 279.086 60.0288 278.026 59.7179C275.121 58.8659 273 56.1807 273 53C273 49.8193 275.121 47.1341 278.026 46.2821C279.086 45.9712 280 45.1046 280 44V0Z"
          />
        </clipPath>
      </defs>
    </svg>
  </div>
</template>

<script>
import { clipboard } from 'electron'
import { mapState } from 'vuex'

import Toast from '@/components/Toast'

export default {
  components: {
    Toast
  },
  props: {
    account: {
      type: Object,
      required: true
    }
  },
  data() {
    return {
      copied: false
    }
  },
  computed: {
    ...mapState(['user'])
  },
  methods: {
    copyIBAN(value) {
      clipboard.writeText(value)
      this.copied = true
    }
  }
}
</script>

<style lang="postcss">
.check {
  @apply relative flex flex-col bg-gray-150;
  width: 280px;
  height: 160px;
}
.shadow-wrap {
  @apply relative rounded-lg overflow-hidden;
}
.clip-svg {
  clip-path: url(#myClip);
}
</style>
